This is a git repository to contain the cpdn upload sorting scripts. 

It is suggested that these scripts are run by the crontab, setting the required environment variables. 

Note: first this repository will need to be cloned into the 'SCRIPTS_DIR'

Example crontab on anemoi:

### Environment Variables for batch sorting scripts
#
# location of lists of batches and successful/failed workunits
BATCH_LISTS_URLS=http://vorvadoss.oerc.ox.ac.uk/cpdnboinc_dev/download/batch_lists,http://climateapps2.oerc.ox.ac.uk/batch

# Folder for sorted results
RESULTS_FOLDER=/storage/boinc/upload

# Incoming folder where new uploads are put
INCOMING_FOLDER=/storage/incoming/uploader

# (optional) temporary directory which the backup 'open_batches.txt' and 'closed_batches.txt' are saved to
TMPDIR=/home/cpdn

# (optional) url for sorted files on the upload folder (goes into list of successful workunits as a 'wget' file)
UPLOAD_BASE_URL=http://upload2.cpdn.org/results

# Directory which these scripts are cloned into
SCRIPTS_DIR=/home/cpdn/cpdn_upload_sorting

# Directory for log files
LOG_DIR=/var/www/projects/cpdn/log_anemoi

# Pull updates from repo
55 * * * * /bin/sh -c "cd $SCRIPTS_DIR && /usr/bin/git pull origin master" 2>/dev/null

# Do the sorting (phase1: hourly, phase2: daily @ 7am)
0 * * * * $SCRIPTS_DIR/batch_sorting_phase1.py >> $LOG_DIR/batch_sorting_phase1.log
0 7 * * * $SCRIPTS_DIR/batch_sorting_phase2.py >> $LOG_DIR/batch_sorting_phase2.log
